<%- include("include/header") %>
<!-- header ends here -->

<div class="container py-md-5">
  <%- include('include/flash') %>
  
  <div class="dashboard-welcome">
    <h1 class="dashboard-title">
      <i class="fas fa-fire"></i> –°–∞–π–Ω —É—É, <span class="username-highlight"><%= user.username %></span>! üéâ
    </h1>
    <p class="dashboard-subtitle">
      –®–∏–Ω—ç “Ø–π–ª —è–≤–¥–∞–ª “Ø“Ø—Å–≥—ç–∂, –Ω–∞–π–∑ –Ω”©—Ö–¥”©”© —É—Ä—å–∂ —ç—Ö–ª—ç—ç—Ä—ç–π!
    </p>
  </div>

  <div class="dashboard-quick-actions">
    <a href="/create-event" class="quick-action-card">
      <div class="quick-action-icon">
        <i class="fas fa-plus-circle"></i>
      </div>
      <h3>“Æ–π–ª —è–≤–¥–∞–ª “Ø“Ø—Å–≥—ç—Ö</h3>
      <p>–®–∏–Ω—ç “Ø–π–ª —è–≤–¥–∞–ª –∑–æ—Ö–∏–æ–Ω –±–∞–π–≥—É—É–ª–∞—Ö</p>
    </a>
    
    <a href="/events" class="quick-action-card">
      <div class="quick-action-icon">
        <i class="fas fa-calendar-alt"></i>
      </div>
  <h3>Event</h3>
      <p>“Æ–π–ª —è–≤–¥–ª—É—É–¥—ã–≥ “Ø–∑—ç–∂ –Ω—ç–≥–¥—ç—Ö</p>
    </a>
    
    <a href="/profile/<%= user.username %>" class="quick-action-card">
      <div class="quick-action-icon">
        <i class="fas fa-user"></i>
      </div>
      <h3>–ú–∏–Ω–∏–π –ø—Ä–æ—Ñ–∞–π–ª</h3>
      <p>–ü—Ä–æ—Ñ–∞–π–ª –±–æ–ª–æ–Ω “Ø–π–ª —è–≤–¥–ª—É—É–¥</p>
    </a>
  </div>

  <div class="dashboard-content">
    <% if (events && events.length) { %>
    <h2 class="section-title">
      <i class="fas fa-fire"></i> –°“Ø“Ø–ª–∏–π–Ω “Ø–µ–∏–π–Ω “Ø–π–ª —è–≤–¥–ª—É—É–¥
    </h2>
    <div class="events-grid-compact">
      <% events.forEach(function(event) { %>
      <a href="/event/<%= event._id %>" class="event-card-compact">
        <div class="event-compact-header">
          <span class="event-status-mini <%= event.isFull ? 'status-full' : 'status-open' %>">
            <%= event.isFull ? '–î“Ø“Ø—Ä—Å—ç–Ω' : '–ù—ç—ç–ª—Ç—Ç—ç–π' %>
          </span>
          <span class="event-capacity-mini">
            <i class="fas fa-users"></i> <%= event.participants.length %>/<%= event.capacity %>
          </span>
        </div>
        <h4><i class="fas fa-star"></i> <%= event.name %></h4>
        <p class="event-compact-location">
          <i class="fas fa-map-marker-alt"></i> <%= event.location %>
        </p>
        <p class="event-compact-date">
          <i class="fas fa-clock"></i> <%= new Date(event.eventDate).toLocaleDateString() %>
        </p>
        <div class="event-compact-progress">
          <div class="event-compact-progress-bar" style="width: <%= (event.participants.length / event.capacity) * 100 %>%"></div>
        </div>
      </a>
      <% }) %>
    </div>
    <div class="text-center mt-4">
      <a href="/events" class="btn btn-primary btn-lg">
        <i class="fas fa-calendar-alt"></i> –ë“Ø—Ö “Ø–π–ª —è–≤–¥–ª—ã–≥ “Ø–∑—ç—Ö
      </a>
    </div>
    <% } else { %>
    <div class="empty-dashboard">
      <i class="fas fa-calendar-times"></i>
      <h3>“Æ–π–ª —è–≤–¥–∞–ª –±–∞–π—Ö–≥“Ø–π –±–∞–π–Ω–∞</h3>
      <p>–ê–Ω—Ö–Ω—ã “Ø–π–ª —è–≤–¥–ª–∞–∞ “Ø“Ø—Å–≥—ç—ç–¥ —ç—Ö–ª—ç—ç—Ä—ç–π!</p>
    </div>
    <% } %>
  </div>
</div>

<!-- footer begins -->
<%- include('include/footer') %>
